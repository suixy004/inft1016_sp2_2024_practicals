let correctpassword= localStorage.getItem('password') ||'';

window.onload=function(){
  if (!correctPassword){
    setPassword();
  } else {
    document.getElementById('password-section').style.display = 'block';
    document.getElementById('todotasks-section').style.display = 'none';
  }
};

function setPassword(){
  const newPassword = prompt('Enter New Password.');
  if(newPassword){
    correctPassword=newPassword;
    localStorage.setItem('password',correctPassword)
    alert('Password Set Successfully');
    document.getElementById('password-section').style.display = 'block';
    document.getElementById('todotasks-section').style.display = 'none';
  }
}

function checkPassword(){
  let passwordInput=document.getElementById('password-input').value;
  if (passwordInput === correctPassword){
    document.getElementById('password-section').style.display = 'none';
    document.getElementById('todotasks-section').style.display = 'block';

  } else {
    alert('Incorrect password! Please try again.');
  }
}







function addTasks(){
    const taskInput=document.getElementById('task-input').value.trim();
    if(taskInput){
      const taskList=document.getElementById('task-list');
      const li=document.createElement('li');
      li.innerHTML =`<input type="checkbox" onchange="saveTasks()"><span>${taskInput}</span>`;
      taskList.appendChild(li);
      document.getElementById('task-input').value='';
      saveTasks();
    }
  }

  function loadTasks(){
    const tasks=JSON.parse(localStorage.getItem('tasks')) ||[];
    const taskList = document.getElementById('task-list');
    taskList.innerHTML='';
    tasks.forEach(task=>{
      const li=document.createElement('li');
      li.innerHTML=`<input type="checkbox" onchange="saveTasks()" ${task.checked? 'checked':''}><span>${task.text}</span>`;
        taskList.appendChild(li);
    });
  }

  function saveTasks(){
    const tasks=Array.from(document.querySelectorAll('#task-list li')).map(li=>({
      text:li.querySelector('span').textContent,
      checked:li.querySelector('input[type="checkbox"]').checked
    }));
    localStorage.setItem('task',JSON.stringify(tasks));
  }

  function clearTasks(){
    document.getElementById('task-list').innerHTML='';
    localStorage.removeItem('tasks');
  }

  function removeTask(element){
    element.parentElement.style.display = 'none';
  }

  document.addEventListener('DOMContentLoaded',loadTasks);